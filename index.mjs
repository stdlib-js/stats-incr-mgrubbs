// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-copy@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-accessor@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-max@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-sqrt@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-roundn@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-t-quantile@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nan@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-positive-zero@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-negative-zero@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-nan@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-pinf@esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-ninf@esm/index.mjs";var w=i,y=e,T=f.isPrimitive,E=h.isPrimitive,N=v,O=u;var V=function(i,e){if(!y(e))return new TypeError(N("invalid argument. Options argument must be an object. Value: `%s`.",e));if(w(e,"alpha")){if(i.alpha=e.alpha,!T(i.alpha)||O(i.alpha))return new TypeError(N("invalid option. `%s` option must be a number primitive. Option: `%s`.","alpha",i.alpha));if(i.alpha<0||i.alpha>1)return new RangeError(N("invalid option. `%s` option must be on the interval [0,1]. Option: `%f`.","alpha",i.alpha))}return w(e,"alternative")&&(i.alternative=e.alternative,!E(i.alternative))?new TypeError(N("invalid option. `%s` option must be a string primitive. Option: `%s`.","alternative",i.alternative)):null},k={alpha:.05,alternative:"two-sided",digits:4,decision:!0},z=j,P=c,q=b,R=g,W=x;var A=function(i,e,t){var s,n,r;return s=R,n=W,r=0,function(a,o){var l,m,d;if(q(a))r=e,s=a,n=a;else if(r<e)r+=1,(a<s||a===s&&P(a))&&(s=a),(a>n||a===n&&z(a))&&(n=a);else if(t[o]===s&&a>s||t[o]===n&&a<n||q(t[o])){for(s=a,n=a,d=0;d<e;d++)if(d!==o){if(m=t[d],q(m)){s=m,n=m;break}(m<s||m===s&&P(m))&&(s=m),(m>n||m===n&&z(m))&&(n=m)}}else if(a<s)s=a;else if(a>n)n=a;else if(0===a){if(l=P(a),a===s)if(t[o]===s&&P(t[o])&&!1===l){for(s=a,d=0;d<e;d++)if(d!==o&&P(t[d])){s=t[d];break}}else l&&(s=a);if(a===n)if(t[o]===n&&z(t[o])&&l){for(n=a,d=0;d<e;d++)if(d!==o&&z(t[d])){n=t[d];break}}else!1===l&&(n=a)}return i[0]=s,i[1]=n,i}},D=b,F=l;var G=function(i,e,t){var s,n,r,a,o,l;return l=e-1,r=0,a=0,o=0,function(m,d){var p,f;if(D(m))o=e,a=NaN,r=NaN;else{if(o<e)return r+=(s=m-a)*(m-(a+=s/(o+=1))),i[0]=a,i[1]=1===o?0:F(r/(o-1)),i;if(1===o)return a=m,r=0,i[0]=m,i[1]=0,i;if(D(t[d])){for(o=1,a=m,r=0,p=0;p<e;p++)if(p!==d){if(f=t[p],D(f)){o=e,a=NaN,r=NaN;break}r+=(s=f-a)*(f-(a+=s/(o+=1)))}}else!1===D(r)&&(n=t[d],r+=(s=m-n)*(n-a+(m-(a+=s/e))))}return i[0]=a,i[1]=F(r/l),i}},M=i,B=e,C=t.isPrimitive,H=s.isPrimitive,I=n,J=r,K=a,L=o,Q=l,S=m,U=d,X=p,Y=V,Z=k,$=A,_=G;var ii=function(i){var e,t,s,n,r,a,o,l,m,d,p,f,h,v,u;if(!C(i))throw new TypeError("invalid argument. Window size must be a positive integer. Value: `"+i+"`.");if(i<3)throw new RangeError("invalid argument. Window size must be greater than or equal to 3. Value: `"+i+"`.");if(n=I(Z),arguments.length>1&&(r=Y(n,arguments[1])))throw r;return a=new X(i),f=i-2,p=0,v=0,h=0,u=-1,o="min"===n.alternative||"max"===n.alternative?n.alpha/i:n.alpha/(2*i),d=U(1-o,f),p=(i-1)*d/Q(i*(f+d*d)),s=$(l=[0,0],i,a),e=_(m=[0,0],i,a),K(t={},"rejected",c),J(t,"alpha",n.alpha),J(t,"criticalValue",p),K(t,"statistic",b),J(t,"df",f),K(t,"mean",g),K(t,"sd",x),K(t,"min",w),K(t,"max",y),J(t,"alt",n.alternative),J(t,"method","Grubbs' Test"),J(t,"print",T),j;function j(r){var o;return 0===arguments.length?h<i?null:t:(h+=1,e(r,u=(u+1)%i),s(r,u),a[u]=r,h<i?null:("min"===n.alternative?v=(m[0]-l[0])/m[1]:"max"===n.alternative?v=(l[1]-m[0])/m[1]:(o=L(m[0]-l[0],l[1]-m[0]),v=o/m[1]),t))}function c(){return v>p}function b(){return v}function g(){return m[0]}function x(){return m[1]}function w(){return l[0]}function y(){return l[1]}function T(i){var e,s,r;if(s=n.digits,e=n.decision,arguments.length>0){if(!B(i))throw new TypeError("invalid argument. Must provide an object. Value: `"+i+"`.");if(M(i,"digits")){if(!C(i.digits))throw new TypeError("invalid option. `digits` option must be a positive integer. Option: `"+i.digits+"`.");s=i.digits}if(M(i,"decision")){if(!H(i.decision))throw new TypeError("invalid option. `decision` option must be boolean. Option: `"+i.decision+"`.");e=i.decision}}return r="",r+=t.method,r+="\n\n",r+="Alternative hypothesis: ","max"===n.alternative?r+="The maximum value ("+l[1]+") is an outlier":"min"===n.alternative?r+="The minimum value ("+l[0]+") is an outlier":(r+="The ",m[0]-l[0]>l[1]-m[0]?r+="minimum value ("+l[0]+")":r+="maximum value ("+l[1]+")",r+=" is an outlier"),r+="\n\n",r+="    criticalValue: "+S(p,-s)+"\n",r+="    statistic: "+S(v,-s)+"\n",r+="    df: "+f+"\n",r+="\n",e&&(r+="Test Decision: ",r+=v>p?"Reject null in favor of alternative at "+100*n.alpha+"% significance level":"Fail to reject null in favor of alternative at "+100*n.alpha+"% significance level",r+="\n"),r}},ei=ii;export{ei as default};
//# sourceMappingURL=index.mjs.map
