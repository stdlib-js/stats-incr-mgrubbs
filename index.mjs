// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import{isPrimitive as i}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import{isPrimitive as s}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-accessor@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-max@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-sqrt@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-roundn@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.0.2-esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-t-quantile@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import{isPrimitive as h}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@esm/index.mjs";import{isPrimitive as p}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nan@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-positive-zero@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-negative-zero@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-nan@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-pinf@v0.0.8-esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-ninf@v0.0.8-esm/index.mjs";function x(i,s){if(!t(s))return new TypeError(m("1Hz2V,FD",s));if(e(s,"alpha")){if(i.alpha=s.alpha,!h(i.alpha)||c(i.alpha))return new TypeError(m("1Hz8P,GU","alpha",i.alpha));if(i.alpha<0||i.alpha>1)return new RangeError(m("1HzHp","alpha",i.alpha))}return e(s,"alternative")&&(i.alternative=s.alternative,!p(i.alternative))?new TypeError(m("1Hz2W,Gh","alternative",i.alternative)):null}function w(e,t,i){var s,r,n;return s=g,r=b,n=0,function(a,l){var o,m,d;if(u(a))n=t,s=a,r=a;else if(n<t)n+=1,(a<s||a===s&&v(a))&&(s=a),(a>r||a===r&&j(a))&&(r=a);else if(i[l]===s&&a>s||i[l]===r&&a<r||u(i[l])){for(s=a,r=a,d=0;d<t;d++)if(d!==l){if(m=i[d],u(m)){s=m,r=m;break}(m<s||m===s&&v(m))&&(s=m),(m>r||m===r&&j(m))&&(r=m)}}else if(a<s)s=a;else if(a>r)r=a;else if(0===a){if(o=v(a),a===s)if(i[l]===s&&v(i[l])&&!1===o){for(s=a,d=0;d<t;d++)if(d!==l&&v(i[d])){s=i[d];break}}else o&&(s=a);if(a===r)if(i[l]===r&&j(i[l])&&o){for(r=a,d=0;d<t;d++)if(d!==l&&j(i[d])){r=i[d];break}}else!1===o&&(r=a)}return e[0]=s,e[1]=r,e}}function y(e,t,i){var s,r,n,a,o,m;return m=t-1,n=0,a=0,o=0,function(d,f){var h,p;if(u(d))o=t,a=NaN,n=NaN;else{if(o<t)return n+=(s=d-a)*(d-(a+=s/(o+=1))),e[0]=a,e[1]=1===o?0:l(n/(o-1)),e;if(1===o)return a=d,n=0,e[0]=d,e[1]=0,e;if(u(i[f])){for(o=1,a=d,n=0,h=0;h<t;h++)if(h!==f){if(p=i[h],u(p)){o=t,a=NaN,n=NaN;break}n+=(s=p-a)*(p-(a+=s/(o+=1)))}}else!1===u(n)&&(r=i[f],n+=(s=d-r)*(r-a+(d-(a+=s/t))))}return e[0]=a,e[1]=l(n/m),e}}function z(h){var p,c,j,v,u,g,b,z,H,T,E,N,G,P,k;if(!i(h))throw new TypeError(m("1Hz9b,Hn",h));if(h<3)throw new RangeError(m("1Hz9c,Ho",h));if(v={alpha:.05,alternative:"two-sided",digits:4,decision:!0},arguments.length>1&&(u=x(v,arguments[1])))throw u;return g=new f(h),N=h-2,E=0,P=0,G=0,k=-1,b="min"===v.alternative||"max"===v.alternative?v.alpha/h:v.alpha/(2*h),T=d(1-b,N),E=(h-1)*T/l(h*(N+T*T)),j=w(z=[0,0],h,g),p=y(H=[0,0],h,g),n(c={},"rejected",R),r(c,"alpha",v.alpha),r(c,"criticalValue",E),n(c,"statistic",V),r(c,"df",N),n(c,"mean",q),n(c,"sd",D),n(c,"min",A),n(c,"max",U),r(c,"alt",v.alternative),r(c,"method","Grubbs' Test"),r(c,"print",W),F;function F(e){var t;return 0===arguments.length?G<h?null:c:(G+=1,p(e,k=(k+1)%h),j(e,k),g[k]=e,G<h?null:("min"===v.alternative?P=(H[0]-z[0])/H[1]:"max"===v.alternative?P=(z[1]-H[0])/H[1]:(t=a(H[0]-z[0],z[1]-H[0]),P=t/H[1]),c))}function R(){return P>E}function V(){return P}function q(){return H[0]}function D(){return H[1]}function A(){return z[0]}function U(){return z[1]}function W(r){var n,a,l;if(a=v.digits,n=v.decision,arguments.length>0){if(!t(r))throw new TypeError(m("1Hz47,Gz",r));if(e(r,"digits")){if(!i(r.digits))throw new TypeError(m("1Hz3P,Fv","digits",r.digits));a=r.digits}if(e(r,"decision")){if(!s(r.decision))throw new TypeError(m("1Hz2o,GE","decision",r.decision));n=r.decision}}return l="",l+=c.method,l+="\n\n",l+="Alternative hypothesis: ","max"===v.alternative?l+="The maximum value ("+z[1]+") is an outlier":"min"===v.alternative?l+="The minimum value ("+z[0]+") is an outlier":(l+="The ",H[0]-z[0]>z[1]-H[0]?l+="minimum value ("+z[0]+")":l+="maximum value ("+z[1]+")",l+=" is an outlier"),l+="\n\n",l+="    criticalValue: "+o(E,-a)+"\n",l+="    statistic: "+o(P,-a)+"\n",l+="    df: "+N+"\n",l+="\n",n&&(l+="Test Decision: ",l+=P>E?"Reject null in favor of alternative at "+100*v.alpha+"% significance level":"Fail to reject null in favor of alternative at "+100*v.alpha+"% significance level",l+="\n"),l}}export{z as default};
//# sourceMappingURL=index.mjs.map
