// Copyright (c) 2024 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@v0.2.0-esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@v0.2.0-esm/index.mjs";import{isPrimitive as t}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@v0.2.0-esm/index.mjs";import{isPrimitive as s}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@v0.2.0-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@v0.2.0-esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-accessor@v0.2.0-esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-max@v0.2.0-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-sqrt@v0.2.0-esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-roundn@v0.2.0-esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@v0.1.1-esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-t-quantile@v0.1.0-esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@v0.2.0-esm/index.mjs";import{isPrimitive as v}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@v0.2.0-esm/index.mjs";import{isPrimitive as f}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@v0.2.0-esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nan@v0.2.0-esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-positive-zero@v0.2.0-esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-negative-zero@v0.2.0-esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-nan@v0.2.0-esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-pinf@v0.2.0-esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-ninf@v0.2.0-esm/index.mjs";function x(t,s){if(!i(s))return new TypeError(m("invalid argument. Options argument must be an object. Value: `%s`.",s));if(e(s,"alpha")){if(t.alpha=s.alpha,!v(t.alpha)||h(t.alpha))return new TypeError(m("invalid option. `%s` option must be a number. Option: `%s`.","alpha",t.alpha));if(t.alpha<0||t.alpha>1)return new RangeError(m("invalid option. `%s` option must be on the interval: [0, 1]. Option: `%f`.","alpha",t.alpha))}return e(s,"alternative")&&(t.alternative=s.alternative,!f(t.alternative))?new TypeError(m("invalid option. `%s` option must be a string. Option: `%s`.","alternative",t.alternative)):null}function w(e,i,t){var s,n,r;return s=b,n=g,r=0,function(a,o){var l,m,d;if(c(a))r=i,s=a,n=a;else if(r<i)r+=1,(a<s||a===s&&j(a))&&(s=a),(a>n||a===n&&u(a))&&(n=a);else if(t[o]===s&&a>s||t[o]===n&&a<n||c(t[o])){for(s=a,n=a,d=0;d<i;d++)if(d!==o){if(m=t[d],c(m)){s=m,n=m;break}(m<s||m===s&&j(m))&&(s=m),(m>n||m===n&&u(m))&&(n=m)}}else if(a<s)s=a;else if(a>n)n=a;else if(0===a){if(l=j(a),a===s)if(t[o]===s&&j(t[o])&&!1===l){for(s=a,d=0;d<i;d++)if(d!==o&&j(t[d])){s=t[d];break}}else l&&(s=a);if(a===n)if(t[o]===n&&u(t[o])&&l){for(n=a,d=0;d<i;d++)if(d!==o&&u(t[d])){n=t[d];break}}else!1===l&&(n=a)}return e[0]=s,e[1]=n,e}}function y(e,i,t){var s,n,r,a,l,m;return m=i-1,r=0,a=0,l=0,function(d,p){var v,f;if(c(d))l=i,a=NaN,r=NaN;else{if(l<i)return r+=(s=d-a)*(d-(a+=s/(l+=1))),e[0]=a,e[1]=1===l?0:o(r/(l-1)),e;if(1===l)return a=d,r=0,e[0]=d,e[1]=0,e;if(c(t[p])){for(l=1,a=d,r=0,v=0;v<i;v++)if(v!==p){if(f=t[v],c(f)){l=i,a=NaN,r=NaN;break}r+=(s=f-a)*(f-(a+=s/(l+=1)))}}else!1===c(r)&&(n=t[p],r+=(s=d-n)*(n-a+(d-(a+=s/i))))}return e[0]=a,e[1]=o(r/m),e}}function T(v){var f,h,u,j,c,b,g,T,E,N,O,V,k,z,q;if(!t(v))throw new TypeError(m("invalid argument. Window size must be a positive integer. Value: `%s`.",v));if(v<3)throw new RangeError(m("invalid argument. Window size must be greater than or equal to 3. Value: `%s`.",v));if(j={alpha:.05,alternative:"two-sided",digits:4,decision:!0},arguments.length>1&&(c=x(j,arguments[1])))throw c;return b=new p(v),V=v-2,O=0,z=0,k=0,q=-1,g="min"===j.alternative||"max"===j.alternative?j.alpha/v:j.alpha/(2*v),N=d(1-g,V),O=(v-1)*N/o(v*(V+N*N)),u=w(T=[0,0],v,b),f=y(E=[0,0],v,b),r(h={},"rejected",R),n(h,"alpha",j.alpha),n(h,"criticalValue",O),r(h,"statistic",W),n(h,"df",V),r(h,"mean",A),r(h,"sd",D),r(h,"min",F),r(h,"max",G),n(h,"alt",j.alternative),n(h,"method","Grubbs' Test"),n(h,"print",M),P;function P(e){var i;return 0===arguments.length?k<v?null:h:(k+=1,f(e,q=(q+1)%v),u(e,q),b[q]=e,k<v?null:("min"===j.alternative?z=(E[0]-T[0])/E[1]:"max"===j.alternative?z=(T[1]-E[0])/E[1]:(i=a(E[0]-T[0],T[1]-E[0]),z=i/E[1]),h))}function R(){return z>O}function W(){return z}function A(){return E[0]}function D(){return E[1]}function F(){return T[0]}function G(){return T[1]}function M(n){var r,a,o;if(a=j.digits,r=j.decision,arguments.length>0){if(!i(n))throw new TypeError(m("invalid argument. Must provide an object. Value: `%s`.",n));if(e(n,"digits")){if(!t(n.digits))throw new TypeError(m("invalid option. `%s` option must be a positive integer. Option: `%s`.","digits",n.digits));a=n.digits}if(e(n,"decision")){if(!s(n.decision))throw new TypeError(m("invalid option. `%s` option must be a boolean. Option: `%s`.","decision",n.decision));r=n.decision}}return o="",o+=h.method,o+="\n\n",o+="Alternative hypothesis: ","max"===j.alternative?o+="The maximum value ("+T[1]+") is an outlier":"min"===j.alternative?o+="The minimum value ("+T[0]+") is an outlier":(o+="The ",E[0]-T[0]>T[1]-E[0]?o+="minimum value ("+T[0]+")":o+="maximum value ("+T[1]+")",o+=" is an outlier"),o+="\n\n",o+="    criticalValue: "+l(O,-a)+"\n",o+="    statistic: "+l(z,-a)+"\n",o+="    df: "+V+"\n",o+="\n",r&&(o+="Test Decision: ",o+=z>O?"Reject null in favor of alternative at "+100*j.alpha+"% significance level":"Fail to reject null in favor of alternative at "+100*j.alpha+"% significance level",o+="\n"),o}}export{T as default};
//# sourceMappingURL=index.mjs.map
