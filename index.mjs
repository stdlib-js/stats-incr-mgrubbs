// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-copy@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-accessor@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-max@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-sqrt@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-roundn@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-t-quantile@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nan@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-positive-zero@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-negative-zero@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-nan@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-pinf@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-ninf@esm/index.mjs";var x=i,w=e,y=f.isPrimitive,T=h.isPrimitive,E=u;var N=function(i,e){if(!w(e))return new TypeError("invalid argument. Options argument must be an object. Value: `"+e+"`.");if(x(e,"alpha")){if(i.alpha=e.alpha,!y(i.alpha)||E(i.alpha))return new TypeError("invalid option. `alpha` option must be a number primitive. Option: `"+i.alpha+"`.");if(i.alpha<0||i.alpha>1)return new RangeError("invalid option. `alpha` option must be on the interval [0,1]. Option: `"+i.alpha+"`.")}return x(e,"alternative")&&(i.alternative=e.alternative,!T(i.alternative))?new TypeError("invalid option. `alternative` option must be a string primitive. Option: `"+i.alternative+"`."):null},O={alpha:.05,alternative:"two-sided",digits:4,decision:!0},V=v,k=c,z=j,P=b,q=g;var R=function(i,e,t){var n,s,r;return n=P,s=q,r=0,function(a,o){var l,m,d;if(z(a))r=e,n=a,s=a;else if(r<e)r+=1,(a<n||a===n&&k(a))&&(n=a),(a>s||a===s&&V(a))&&(s=a);else if(t[o]===n&&a>n||t[o]===s&&a<s||z(t[o])){for(n=a,s=a,d=0;d<e;d++)if(d!==o){if(m=t[d],z(m)){n=m,s=m;break}(m<n||m===n&&k(m))&&(n=m),(m>s||m===s&&V(m))&&(s=m)}}else if(a<n)n=a;else if(a>s)s=a;else if(0===a){if(l=k(a),a===n)if(t[o]===n&&k(t[o])&&!1===l){for(n=a,d=0;d<e;d++)if(d!==o&&k(t[d])){n=t[d];break}}else l&&(n=a);if(a===s)if(t[o]===s&&V(t[o])&&l){for(s=a,d=0;d<e;d++)if(d!==o&&V(t[d])){s=t[d];break}}else!1===l&&(s=a)}return i[0]=n,i[1]=s,i}},W=j,A=l;var D=function(i,e,t){var n,s,r,a,o,l;return l=e-1,r=0,a=0,o=0,function(m,d){var p,f;if(W(m))o=e,a=NaN,r=NaN;else{if(o<e)return r+=(n=m-a)*(m-(a+=n/(o+=1))),i[0]=a,i[1]=1===o?0:A(r/(o-1)),i;if(1===o)return a=m,r=0,i[0]=m,i[1]=0,i;if(W(t[d])){for(o=1,a=m,r=0,p=0;p<e;p++)if(p!==d){if(f=t[p],W(f)){o=e,a=NaN,r=NaN;break}r+=(n=f-a)*(f-(a+=n/(o+=1)))}}else!1===W(r)&&(s=t[d],r+=(n=m-s)*(s-a+(m-(a+=n/e))))}return i[0]=a,i[1]=A(r/l),i}},F=i,G=e,M=t.isPrimitive,B=n.isPrimitive,C=s,H=r,I=a,J=o,K=l,L=m,Q=d,S=p,U=N,X=O,Y=R,Z=D;var $=function(i){var e,t,n,s,r,a,o,l,m,d,p,f,h,u,v;if(!M(i))throw new TypeError("invalid argument. Window size must be a positive integer. Value: `"+i+"`.");if(i<3)throw new RangeError("invalid argument. Window size must be greater than or equal to 3. Value: `"+i+"`.");if(s=C(X),arguments.length>1&&(r=U(s,arguments[1])))throw r;return a=new S(i),f=i-2,p=0,u=0,h=0,v=-1,o="min"===s.alternative||"max"===s.alternative?s.alpha/i:s.alpha/(2*i),d=Q(1-o,f),p=(i-1)*d/K(i*(f+d*d)),n=Y(l=[0,0],i,a),e=Z(m=[0,0],i,a),I(t={},"rejected",j),H(t,"alpha",s.alpha),H(t,"criticalValue",p),I(t,"statistic",b),H(t,"df",f),I(t,"mean",g),I(t,"sd",x),I(t,"min",w),I(t,"max",y),H(t,"alt",s.alternative),H(t,"method","Grubbs' Test"),H(t,"print",T),c;function c(r){var o;return 0===arguments.length?h<i?null:t:(h+=1,e(r,v=(v+1)%i),n(r,v),a[v]=r,h<i?null:("min"===s.alternative?u=(m[0]-l[0])/m[1]:"max"===s.alternative?u=(l[1]-m[0])/m[1]:(o=J(m[0]-l[0],l[1]-m[0]),u=o/m[1]),t))}function j(){return u>p}function b(){return u}function g(){return m[0]}function x(){return m[1]}function w(){return l[0]}function y(){return l[1]}function T(i){var e,n,r;if(n=s.digits,e=s.decision,arguments.length>0){if(!G(i))throw new TypeError("invalid argument. Must provide an object. Value: `"+i+"`.");if(F(i,"digits")){if(!M(i.digits))throw new TypeError("invalid option. `digits` option must be a positive integer. Option: `"+i.digits+"`.");n=i.digits}if(F(i,"decision")){if(!B(i.decision))throw new TypeError("invalid option. `decision` option must be boolean. Option: `"+i.decision+"`.");e=i.decision}}return r="",r+=t.method,r+="\n\n",r+="Alternative hypothesis: ","max"===s.alternative?r+="The maximum value ("+l[1]+") is an outlier":"min"===s.alternative?r+="The minimum value ("+l[0]+") is an outlier":(r+="The ",m[0]-l[0]>l[1]-m[0]?r+="minimum value ("+l[0]+")":r+="maximum value ("+l[1]+")",r+=" is an outlier"),r+="\n\n",r+="    criticalValue: "+L(p,-n)+"\n",r+="    statistic: "+L(u,-n)+"\n",r+="    df: "+f+"\n",r+="\n",e&&(r+="Test Decision: ",r+=u>p?"Reject null in favor of alternative at "+100*s.alpha+"% significance level":"Fail to reject null in favor of alternative at "+100*s.alpha+"% significance level",r+="\n"),r}},_=$;export{_ as default};
//# sourceMappingURL=index.mjs.map
