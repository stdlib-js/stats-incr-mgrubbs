// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import{isPrimitive as i}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import{isPrimitive as s}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-accessor@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-max@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-sqrt@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-roundn@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.0.2-esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-t-quantile@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import{isPrimitive as h}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@esm/index.mjs";import{isPrimitive as p}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nan@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-positive-zero@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-negative-zero@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-nan@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-pinf@v0.0.8-esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-ninf@v0.0.8-esm/index.mjs";function x(i,s){if(!e(s))return new TypeError(d("0dt2h",s));if(t(s,"alpha")){if(i.alpha=s.alpha,!h(i.alpha)||j(i.alpha))return new TypeError(d("0dt8h","alpha",i.alpha));if(i.alpha<0||i.alpha>1)return new RangeError(d("invalid option. `%s` option must be on the interval: [0, 1]. Option: `%f`.","alpha",i.alpha))}return t(s,"alternative")&&(i.alternative=s.alternative,!p(i.alternative))?new TypeError(d("0dt2i","alternative",i.alternative)):null}function w(t,e,i){var s,n,r;return s=b,n=g,r=0,function(a,l){var o,d,m;if(u(a))r=e,s=a,n=a;else if(r<e)r+=1,(a<s||a===s&&v(a))&&(s=a),(a>n||a===n&&c(a))&&(n=a);else if(i[l]===s&&a>s||i[l]===n&&a<n||u(i[l])){for(s=a,n=a,m=0;m<e;m++)if(m!==l){if(d=i[m],u(d)){s=d,n=d;break}(d<s||d===s&&v(d))&&(s=d),(d>n||d===n&&c(d))&&(n=d)}}else if(a<s)s=a;else if(a>n)n=a;else if(0===a){if(o=v(a),a===s)if(i[l]===s&&v(i[l])&&!1===o){for(s=a,m=0;m<e;m++)if(m!==l&&v(i[m])){s=i[m];break}}else o&&(s=a);if(a===n)if(i[l]===n&&c(i[l])&&o){for(n=a,m=0;m<e;m++)if(m!==l&&c(i[m])){n=i[m];break}}else!1===o&&(n=a)}return t[0]=s,t[1]=n,t}}function y(t,e,i){var s,n,r,a,o,d;return d=e-1,r=0,a=0,o=0,function(m,f){var h,p;if(u(m))o=e,a=NaN,r=NaN;else{if(o<e)return r+=(s=m-a)*(m-(a+=s/(o+=1))),t[0]=a,t[1]=1===o?0:l(r/(o-1)),t;if(1===o)return a=m,r=0,t[0]=m,t[1]=0,t;if(u(i[f])){for(o=1,a=m,r=0,h=0;h<e;h++)if(h!==f){if(p=i[h],u(p)){o=e,a=NaN,r=NaN;break}r+=(s=p-a)*(p-(a+=s/(o+=1)))}}else!1===u(r)&&(n=i[f],r+=(s=m-n)*(n-a+(m-(a+=s/e))))}return t[0]=a,t[1]=l(r/d),t}}function T(h){var p,j,c,v,u,b,g,T,E,N,k,A,P,R,q;if(!i(h))throw new TypeError(d("0dtAD",h));if(h<3)throw new RangeError(d("0dtAE",h));if(v={alpha:.05,alternative:"two-sided",digits:4,decision:!0},arguments.length>1&&(u=x(v,arguments[1])))throw u;return b=new f(h),A=h-2,k=0,R=0,P=0,q=-1,g="min"===v.alternative||"max"===v.alternative?v.alpha/h:v.alpha/(2*h),N=m(1-g,A),k=(h-1)*N/l(h*(A+N*N)),c=w(T=[0,0],h,b),p=y(E=[0,0],h,b),r(j={},"rejected",D),n(j,"alpha",v.alpha),n(j,"criticalValue",k),r(j,"statistic",V),n(j,"df",A),r(j,"mean",F),r(j,"sd",G),r(j,"min",K),r(j,"max",O),n(j,"alt",v.alternative),n(j,"method","Grubbs' Test"),n(j,"print",B),z;function z(t){var e;return 0===arguments.length?P<h?null:j:(P+=1,p(t,q=(q+1)%h),c(t,q),b[q]=t,P<h?null:("min"===v.alternative?R=(E[0]-T[0])/E[1]:"max"===v.alternative?R=(T[1]-E[0])/E[1]:(e=a(E[0]-T[0],T[1]-E[0]),R=e/E[1]),j))}function D(){return R>k}function V(){return R}function F(){return E[0]}function G(){return E[1]}function K(){return T[0]}function O(){return T[1]}function B(n){var r,a,l;if(a=v.digits,r=v.decision,arguments.length>0){if(!e(n))throw new TypeError(d("0dt4K",n));if(t(n,"digits")){if(!i(n.digits))throw new TypeError(d("0dt3b","digits",n.digits));a=n.digits}if(t(n,"decision")){if(!s(n.decision))throw new TypeError(d("0dt30","decision",n.decision));r=n.decision}}return l="",l+=j.method,l+="\n\n",l+="Alternative hypothesis: ","max"===v.alternative?l+="The maximum value ("+T[1]+") is an outlier":"min"===v.alternative?l+="The minimum value ("+T[0]+") is an outlier":(l+="The ",E[0]-T[0]>T[1]-E[0]?l+="minimum value ("+T[0]+")":l+="maximum value ("+T[1]+")",l+=" is an outlier"),l+="\n\n",l+="    criticalValue: "+o(k,-a)+"\n",l+="    statistic: "+o(R,-a)+"\n",l+="    df: "+A+"\n",l+="\n",r&&(l+="Test Decision: ",l+=R>k?"Reject null in favor of alternative at "+100*v.alpha+"% significance level":"Fail to reject null in favor of alternative at "+100*v.alpha+"% significance level",l+="\n"),l}}export{T as default};
//# sourceMappingURL=index.mjs.map
