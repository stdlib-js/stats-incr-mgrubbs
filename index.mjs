// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import{isPrimitive as i}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import{isPrimitive as s}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-copy@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-accessor@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-max@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-sqrt@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-roundn@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.0.2-esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-t-quantile@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import{isPrimitive as p}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@esm/index.mjs";import{isPrimitive as j}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nan@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-positive-zero@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-negative-zero@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-assert-is-nan@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-pinf@v0.0.7-esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-ninf@esm/index.mjs";function w(i,s){if(!e(s))return new TypeError(m("0dt2h",s));if(t(s,"alpha")){if(i.alpha=s.alpha,!p(i.alpha)||c(i.alpha))return new TypeError(m("0dt8h","alpha",i.alpha));if(i.alpha<0||i.alpha>1)return new RangeError(m("invalid option. `%s` option must be on the interval: [0, 1]. Option: `%f`.","alpha",i.alpha))}return t(s,"alternative")&&(i.alternative=s.alternative,!j(i.alternative))?new TypeError(m("0dt2i","alternative",i.alternative)):null}var y={alpha:.05,alternative:"two-sided",digits:4,decision:!0};function T(t,e,i){var s,r,n;return s=g,r=x,n=0,function(a,l){var o,d,m;if(b(a))n=e,s=a,r=a;else if(n<e)n+=1,(a<s||a===s&&u(a))&&(s=a),(a>r||a===r&&v(a))&&(r=a);else if(i[l]===s&&a>s||i[l]===r&&a<r||b(i[l])){for(s=a,r=a,m=0;m<e;m++)if(m!==l){if(d=i[m],b(d)){s=d,r=d;break}(d<s||d===s&&u(d))&&(s=d),(d>r||d===r&&v(d))&&(r=d)}}else if(a<s)s=a;else if(a>r)r=a;else if(0===a){if(o=u(a),a===s)if(i[l]===s&&u(i[l])&&!1===o){for(s=a,m=0;m<e;m++)if(m!==l&&u(i[m])){s=i[m];break}}else o&&(s=a);if(a===r)if(i[l]===r&&v(i[l])&&o){for(r=a,m=0;m<e;m++)if(m!==l&&v(i[m])){r=i[m];break}}else!1===o&&(r=a)}return t[0]=s,t[1]=r,t}}function E(t,e,i){var s,r,n,a,l,d;return d=e-1,n=0,a=0,l=0,function(m,f){var h,p;if(b(m))l=e,a=NaN,n=NaN;else{if(l<e)return n+=(s=m-a)*(m-(a+=s/(l+=1))),t[0]=a,t[1]=1===l?0:o(n/(l-1)),t;if(1===l)return a=m,n=0,t[0]=m,t[1]=0,t;if(b(i[f])){for(l=1,a=m,n=0,h=0;h<e;h++)if(h!==f){if(p=i[h],b(p)){l=e,a=NaN,n=NaN;break}n+=(s=p-a)*(p-(a+=s/(l+=1)))}}else!1===b(n)&&(r=i[f],n+=(s=m-r)*(r-a+(m-(a+=s/e))))}return t[0]=a,t[1]=o(n/d),t}}function N(p){var j,c,v,u,b,g,x,N,k,A,P,R,q,z,D;if(!i(p))throw new TypeError(m("0dtAD",p));if(p<3)throw new RangeError(m("0dtAE",p));if(u=r(y),arguments.length>1&&(b=w(u,arguments[1])))throw b;return g=new h(p),R=p-2,P=0,z=0,q=0,D=-1,x="min"===u.alternative||"max"===u.alternative?u.alpha/p:u.alpha/(2*p),A=f(1-x,R),P=(p-1)*A/o(p*(R+A*A)),v=T(N=[0,0],p,g),j=E(k=[0,0],p,g),a(c={},"rejected",F),n(c,"alpha",u.alpha),n(c,"criticalValue",P),a(c,"statistic",G),n(c,"df",R),a(c,"mean",K),a(c,"sd",O),a(c,"min",B),a(c,"max",C),n(c,"alt",u.alternative),n(c,"method","Grubbs' Test"),n(c,"print",H),V;function V(t){var e;return 0===arguments.length?q<p?null:c:(q+=1,j(t,D=(D+1)%p),v(t,D),g[D]=t,q<p?null:("min"===u.alternative?z=(k[0]-N[0])/k[1]:"max"===u.alternative?z=(N[1]-k[0])/k[1]:(e=l(k[0]-N[0],N[1]-k[0]),z=e/k[1]),c))}function F(){return z>P}function G(){return z}function K(){return k[0]}function O(){return k[1]}function B(){return N[0]}function C(){return N[1]}function H(r){var n,a,l;if(a=u.digits,n=u.decision,arguments.length>0){if(!e(r))throw new TypeError(m("0dt4K",r));if(t(r,"digits")){if(!i(r.digits))throw new TypeError(m("0dt3b","digits",r.digits));a=r.digits}if(t(r,"decision")){if(!s(r.decision))throw new TypeError(m("0dt30","decision",r.decision));n=r.decision}}return l="",l+=c.method,l+="\n\n",l+="Alternative hypothesis: ","max"===u.alternative?l+="The maximum value ("+N[1]+") is an outlier":"min"===u.alternative?l+="The minimum value ("+N[0]+") is an outlier":(l+="The ",k[0]-N[0]>N[1]-k[0]?l+="minimum value ("+N[0]+")":l+="maximum value ("+N[1]+")",l+=" is an outlier"),l+="\n\n",l+="    criticalValue: "+d(P,-a)+"\n",l+="    statistic: "+d(z,-a)+"\n",l+="    df: "+R+"\n",l+="\n",n&&(l+="Test Decision: ",l+=z>P?"Reject null in favor of alternative at "+100*u.alpha+"% significance level":"Fail to reject null in favor of alternative at "+100*u.alpha+"% significance level",l+="\n"),l}}export{N as default};
//# sourceMappingURL=index.mjs.map
